{
    "id": "{{service.name}}",
    "cpus": {{service.cpus}},
    "mem": {{service.mem}},
    "instances": 1,
    "container": {
        "type": "DOCKER",
        "docker": {
            "image": "{{resource.assets.container.docker.predator}}",
            "network": "HOST"
        }
    },
    "portDefinitions": [
        {
            "port": 0,
            "protocol": "tcp",
            "name": "predator",
            "labels": {
                "VIP_0": "/predator:80"
            }
        }
    ],
    "labels": {
        "DCOS_SERVICE_NAME": "{{service.name}}",
        "DCOS_SERVICE_PORT_INDEX": "0",
        "DCOS_SERVICE_SCHEME": "http"
    },
    "env": {
        "JOB_PLATFORM": "METRONOME",
        "INTERNAL_ADDRESS": "{{service.internal_address}}",
        "METRONOME_URL": "{{service.metronome_url}}",
        {{#service.minimum_wait_for_delayed_report_status_update_in_ms}}
            "MINIMUM_WAIT_FOR_DELAYED_REPORT_STATUS_UPDATE_IN_MS": "{{service.minimum_wait_for_delayed_report_status_update_in_ms}}",
        {{/service.minimum_wait_for_delayed_report_status_update_in_ms}}

        "DOCKER_NAME": "{{runner.runner_docker_name}}",
        {{#runner.runner_cpu}}
            "RUNNER_CPU": "{{runner.runner_cpu}}",
        {{/runner.runner_cpu}}
        {{#runner.runner_memory}}
            "RUNNER_MEMORY": "{{runner.runner_memory}}",
        {{/runner.runner_memory}}

        "DATABASE_TYPE": "{{database.database_type}}",
        {{#database.database_address}}
            "DATABASE_ADDRESS": "{{database.database_address}}",
        {{/database.database_address}}
        {{#database.database_username}}
            "DATABASE_USERNAME": "{{database.database_username}}",
        {{/database.database_username}}
        {{#database.database_password}}
            "DATABASE_PASSWORD": "{{database.database_password}}",
        {{/database.database_password}}
        {{#database.database_name}}
            "DATABASE_NAME": "{{database.database_name}}",
        {{/database.database_name}}
 },
    "healthChecks": [
        {
            "gracePeriodSeconds": 5,
            "intervalSeconds": 60,
            "timeoutSeconds": 10,
            "maxConsecutiveFailures": 3,
            "portIndex": 0,
            "path": "/health",
            "protocol": "MESOS_HTTP",
            "delaySeconds": 15
        }
    ]
}
